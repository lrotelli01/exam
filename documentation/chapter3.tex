\chapter{System Model}

\section{Architecture}
\begin{itemize}
    \item \textbf{Network:} Fully-connected mesh topology with $N$ users and $M$ tables.
    \item \textbf{Communication:} Asynchronous message-passing between modules.
    \item \textbf{Timing:} Discrete event simulation with \texttt{simTime()} in seconds.
\end{itemize}

\section{Main Components}

\subsection{User Module}
Defined in \texttt{User.h/cc, User.ned}. It generates database access requests.
\begin{description}
    \item[Parameters:] \hfill
    \begin{itemize}
        \item \texttt{userId}: User identifier (0 to $N-1$).
        \item \texttt{lambda}: Poisson rate for inter-arrivals (accesses/second).
        \item \texttt{readProbability}: Probability of read operation (0 to 1).
        \item \texttt{numTables}: Total number of tables ($M$).
        \item \texttt{tableDistribution}: "uniform" or "lognormal".
        \item \texttt{serviceTime}: Fixed operation duration (seconds).
    \end{itemize}
    \item[Behavior:] Schedules accesses per Poisson process with rate $\lambda$. For each access, it selects a table and type (read/write), sends the request, and records statistics upon response.
\end{description}

\subsection{Table Module}
Defined in \texttt{Table.h/cc, Table.ned}. Simulates concurrent access to a single table.
\begin{description}
    \item[Internal State:] \texttt{activeReaders}, \texttt{writeActive}, \texttt{requestQueue} (FCFS), \texttt{serviceEvents}.
    \item[Mutual Exclusion Logic:]
    \begin{itemize}
        \item If \texttt{writeActive=true}: all new accesses blocked.
        \item If \texttt{activeReaders>0}: new reads OK, new writes blocked.
        \item If \texttt{activeReaders=0} and \texttt{writeActive=false}: both reads and writes OK.
    \end{itemize}
\end{description}

\subsection{Network}
Defined in \texttt{DatabaseNetwork.ned}. 
\begin{itemize}
    \item \textbf{Parameters:} \texttt{numUsers} (default 60), \texttt{numTables} (default 20).
    \item \textbf{Topology:} Fully-connected mesh where each \texttt{user[i]} sends requests to any \texttt{table[j]}.
\end{itemize}

\section{Temporal Model}
\begin{itemize}
    \item \textbf{Inter-arrival times:} Exponential with rate $\lambda = 1/T_{inter}$. Generator: \texttt{exponential(1/lambda)}.
    \item \textbf{Table selection:} 
    \begin{itemize}
        \item Uniform: \texttt{intuniform(0, numTables-1)}.
        \item Lognormal: \texttt{lognormal(m, s)} mapped to $[0, M-1]$.
    \end{itemize}
    \item \textbf{Response time:} Queueing time + Service time.
\end{itemize}
